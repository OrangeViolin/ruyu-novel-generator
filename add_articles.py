#!/usr/bin/env python3
"""添加示例文章到语料库"""
import sys
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from backend.database.models import Corpus, get_db

# 文章列表
articles = [
    {
        "title": "订婚宴上未婚妻干弟弟要我签婚前协议，我直接退婚",
        "source": "焦点文学网",
        "content": """我将协议撕成了碎片，纸屑纷纷扬扬落在地上。

顾时川的脸色瞬间变了。

他猛地站起身，椅子向后刮出刺耳的响声。

"姓陆的，你几个意思？"

我没看他，只转头望向苏芸烟。

她的眉头已经皱起来，眼神里带着惯常的厌烦，像是家长看着两个闹别扭的小孩。

只不过，每一次，她都理所当然地觉得该是我退让。

"时川喝多了，你不是不知道。"她声音抬高，带着明显的不悦。

"他闹着玩的，你至于这么认真吗？签个字哄哄他又能怎样？"

哄哄他。

我看着她因为恼怒而微微泛红的脸，忽然想起几年前我们刚在一起的时候，她也是这样的表情。

在我第一次提出顾时川似乎太过黏她的时候，她不耐烦地说："陆衍，他是***弟弟，我们从小一起长大的。"

"他就是孩子脾气，你瞎吃什么醋？"

于是我一让就是五年。

顾时川喜欢恶作剧。

故意弄丢我重要的合同文件，"不小心"把咖啡泼在我存有重要资料的电脑上，偷偷把我喝的养生茶换成泻药。

每次我找他算帐时，苏芸烟永远护着他，永远只是一句："他不是故意的，你别那么小心眼。"

三个月前，顾时川在刹车片上动了手脚。

我在高速上差点没命，车子报废，右腿骨折，在医院躺了整整两个月。

医生说我命大，在鬼门关转了一圈被救回来。

而且差一点就成了废人。

我记得苏芸烟在医院哭得发抖，她说一定要狠狠骂时川。

可第二天，她提着保温桶来看我，语气已经软了。

"时川哭了一夜，他知道错了。"

"他其实没有恶意，就是脑子一热想跟你开玩笑，没想到后果那么严重。"

"你千万别报警，这事就算过去了，好不好？"

我当时看着她通红的眼眶，一句话都说不出来。

最终选择了忍让。

而现在，顾时川正站在我们的订婚宴上。

拿着一份所谓的"生子协议"，理直气壮地要我签字。

我忍无可忍。

"苏芸烟。"我强压怒意，"你再说一遍，你要我怎么做？"

她似乎被我的态度激怒了，豁然起身："我只是让你签个字，让时川别再闹而已！"

"陆衍，你今天怎么回事？"

"平时不是都好好的吗？时川就是开个玩笑，你配合一下不行吗？"

"非要闹得大家难堪，让客人看笑话？"

顾时川在一旁嗤笑一声，下巴微扬，眼神里满是挑衅和得意。

他料定了我会屈服，像过去的每一次一样。

他甚至悠闲地给自己倒了杯酒，晃着酒杯，等着我低头。

我慢慢站起身，整理了一下西装外套。

然后看向顾时川："这里不欢迎你，你自己滚，还是我让保安请你出去？"

整个宴会厅瞬间鸦雀无声。

所有宾客都看了过来，目光在我们三人之间逡巡。

顾时川的笑容僵在脸上。

他大概从来没想过，我会当着这么多人的面给他难堪。

脸色由红转青，手指攥紧了酒杯，指节发白。

"陆衍！"

苏芸烟一把抓住我的手臂，指甲几乎掐进我肉里。

"大家都看着呢，你发什么神经？！"

"快给时川道歉！"
"""
    },
    {
        "title": "晒完婚戒后她说我抢她老公",
        "source": "bcty365",
        "content": """老公在马尔代夫向我求婚之后。

我随手将求婚照发到了朋友圈。

没想到刚发出，公司群里的新人秦晓悦就公开艾特我：

"这不是我老公跟我求婚的照片吗？你偷我图干什么？"

我愣住了。

下一秒，群里炸开了锅。

"天呐！苏晚你偷图？"

"秦晓悦不是说她在马尔代夫跟老公求婚吗？"

"苏晚你平时看着挺老实的，怎么干这种事？"

我的主管张姐直接在群里@我：

"苏晚，你来我办公室一趟。"

我握着手机，手都在发抖。

顾澈，我的未婚夫，在马尔代夫向我求婚。

这是我们之间最珍贵的时刻。

而现在，有人说我偷了她的图。

我深吸一口气，回复道："秦晓悦，你确定那是你老公？"

秦晓悦秒回，语气嚣张："当然是我老公！我们在一起三年了！"

"你偷图就算了，还敢装？"

"大家评评理，这人偷我求婚照发朋友圈，还装无辜！"

同事们纷纷指责我。

"苏晚，这样做太不厚道了。"

"就是，想结婚自己去找啊，偷别人图算什么？"

我看着那些字，心里一片冰凉。

就在这时，顾澈的电话打了进来。

"晚晚，群里发生什么事了？"

他的声音听起来很困惑。

我强忍着眼泪："顾澈，你们公司有没有叫秦晓悦的？"

"秦晓悦？"顾澈想了想，"有啊，刚入职两个月的实习生。"

"她跟别人说你是她老公，还说我在马尔代夫的求婚照是偷她的图。"

电话那头沉默了几秒。

然后传来顾澈气极反笑的声音："她疯了？"

"晚晚，你别哭，我马上回公司处理。"

半小时后，顾澈出现在公司。

他径直走到我面前，当着所有人的面握住我的手。

"张姐，苏晚没有偷图。"

"那张照片是我向她求婚时拍的，地点就是马尔代夫。"

"我是顾澈，秦晓悦只是我们公司的一个实习生。"

整个会议室鸦雀无声。

张姐的脸色瞬间变了。

她看向秦晓悦："秦晓悦，你还有什么好说的？"

秦晓悦脸色惨白，却还在嘴硬："不可能！你是顾总？"

"可是我老公明明叫……"她突然住了嘴。

"你老公叫什么？"顾澈冷冷地问。

秦晓悦支支吾吾说不出话。

顾澈拿出手机，当着所有人的面播放了一段录音。

那是秦晓悦在茶水间跟同事炫耀的话：

"我老公是CEO，特别有钱。"

"我们准备结婚了，要在马尔代夫办婚礼。"

"到时候你们都来啊！"

录音结束，秦晓悦的脸已经红到了耳根。

原来她一直都在撒谎。

她根本没有什么CEO老公，一切都是她编的。

而我，成了她炫耀的牺牲品。

顾澈看向秦晓悦，语气冰冷："秦晓悦，你被开除了。"

"收拾东西，立刻滚。"
"""
    },
    {
        "title": "为了整蛊我，未婚妻将我的氧气换成了氦气",
        "source": "163",
        "content": """作为国家地理特邀摄影，要去梅里雪山拍摄封面图。

刚爬了一半我就觉得气短心虚，太阳穴突突直跳。

我意识到这是高反的症状，连忙拿出备用氧气罐猛吸一口。

可气体一入肺，我立马意识到不对劲，转头看向旁边的未婚妻：

"这是什么？！"

没想到一开口，声音尖细扭曲，活脱脱就是滑稽的唐老鸭音。

声音一出，引得未婚妻和她的小学弟一阵狂笑：

"嘎？！哈哈哈哈！唐老鸭！我的天！笑死我了！"

他们笑得前仰后合，学弟甚至夸张地捶打着雪地。

我瞬间明白，他们为了整蛊我，偷偷把我的救命氧气换成了氦气！

等他们终于笑够了，我强撑着对未婚妻说：

"...氧...备用氧气...给我！"

未婚妻擦了擦笑出的眼泪，满不在乎地摆摆手：

"哎呀，小辰年纪小身子弱，备用氧气都给他吸啦！"

"你身强力壮的，忍忍就过去了嘛。"

我没和她争辩，用颤抖的手掏出卫星电话：

"许主编，我的备用氧气被人恶意调换，现在出现严重高反，麻烦立刻安排救援队来接我。"

话音刚落，卫星电话就被未婚妻林倩一把夺了过去。

她看着已发送的求救信号，气得脸颊通红，随即不屑地嗤笑：

"秦大摄影师，你是不是太小题大做了？"

"不就是吸了点氦气开了个玩笑嘛，至于叫救援？"

"你知道这次拍摄筹备了多久吗？这点高反你都忍不了？"

她作势就要把卫星电话扔向远处的冰裂缝。

我死死抓住她的手腕，高反带来的剧烈头痛和恶心让我眼前发黑。

她和她的学弟陈辰都戴着氧气面罩，背着充足的备用氧气瓶，面色红润。

只有我，徒劳地捏着那个可笑的、笨重的氦气罐。

陈辰走到我面前，声音带着虚假的关切：

"秦哥，你别怪学姐嘛。是我太没用了，才爬这么点就喘不上气……"

"学姐说你是资深高山摄影师，这点海拔对你来说小意思啦……"

说着他满足的吸了口氧，挑衅般的朝我挑了挑眉。

为了这次封面拍摄，我特意托人在高原部队搞到了军用级高浓度氧，能极大缓解高反。

如今却挂在这个矫情的学弟身上。

林倩伸手帮他正了正背包带，语气温柔：

"小辰你别理他，他就是仗着自己有点名气，一点委屈都受不了。"

她转头看向我时，眼里的不耐几乎要溢出来：

"别装了行不行？"

"我查过资料，高反就是心理作用，意志力强点就扛过去了，哪有那么严重？"

"你那高级氧气瓶也就是个心理安慰，沉得要死。"

"小辰是工作室未来的顶梁柱，他身体不适影响拍摄，损失比你大多了。"

我颤抖着手去摸索背包外层口袋的应急高反药，却发现包里空空如也。

林倩像是突然想起什么，突然从陈辰的衣兜里拿出我的药盒，倒出两粒塞进他嘴里：

"这个也给小辰备着吧。你看你还能站着抢电话，哪有那么娇气？"

"真当自己是国宝摄影师了，这点苦都吃不了？"

她这副理直气壮的模样，比稀薄的空气更让我窒息。

我的定制氧气，我的应急药品，全都成了她讨好小学弟的贡品。

其他几个协助拍摄的助理默默调整着设备，假装没看见这边的冲突

只有我像个被拔掉氧气管的病人，徒劳地挣扎在生死线上。

"急性高反会引发肺水肿、脑水肿……会死人的！"

我几乎是从牙缝里挤出这句话。

"还肺水肿？吓唬谁呢？"林倩翻了个白眼。

陈辰配合的往她身后缩了缩：

"秦哥，我知道你不太喜欢我……但学姐说你经验丰富，这种小场面肯定没问题的。"

他说完甚至还对着自己领口上的GoPro比了个耶。

我看着他那副嘴脸，气的差点晕厥。

"够了！"

我伸手想去夺回我的氧气瓶。

林倩猛地推了我一把，我踉跄着差点摔倒：

"你干什么！小辰要是出什么事，你付得起责任吗？！"

陈辰立刻捂住胸口，声音变得虚弱：

"学姐，我好像又有点不舒服……"

"我是不是不该跟着来……默哥是不是觉得我抢了他的风头……"

"你没错，是他太自私！"

林倩赶紧扶住他，轻声安慰：

"他就是被惯坏了，以为全世界都得围着他转。"

风雪似乎更大了，迷蒙了我的视线。

我看着他们宛如一对璧人互相依偎取暖，丝毫不顾及我这个名义上的未婚夫。

极度的愤怒和缺氧带来的濒死感交织。

我猛地将手里的氦气瓶的砸在旁边的冰岩上，厉声道：

"林倩！我们完了！订婚取消！"

林倩听见我的话一愣，随即面容因恼怒而扭曲。

她向前一步，声音尖利：

"秦聿！你发什么疯！就为了这点小事要取消订婚？你知不知道自己在说什么！"

"小事？"我几乎是从肺里挤压出声音，"换掉我的救命氧气……是小事？"

陈辰立刻上前，声音怯怯的：

"学姐，你别生气……都是我的错，我不该身体这么差……"

"秦哥肯定是因为讨厌我才说的气话……"

他看向我，眼底却藏着一丝难以察觉的得意。

旁边一位登山向导张哥看不下去了，皱着眉开口打圆场：

"林小姐，秦先生的状态看起来真的不好，高反不是闹着玩的，要不先……"

"张哥你不懂！"

林倩毫不客气地打断他，语气斩钉截铁。

"他就是平时缺乏锻炼，又爱装！哪次拍片不是小题大做？"

"上次在戈壁中暑，闹得整个团队等他一人，这次又来这套！"

她的话像冰锥一样刺过来。

戈壁那次，我是为了捕捉最佳光线险些热射病休克。

可在她眼里却成了小题大做。

"就是，"另一个与林倩私交甚好的女助理也小声附和。

"秦老师，倩姐也是为了大局考虑。"
"""
    }
]

def add_articles():
    """添加文章到数据库"""
    db = next(get_db())

    for article in articles:
        # 检查是否已存在
        existing = db.query(Corpus).filter(
            Corpus.title == article["title"],
            Corpus.source == article["source"]
        ).first()

        if existing:
            print(f"文章已存在：{article['title']}")
            continue

        # 创建新记录
        corpus = Corpus(
            source=article["source"],
            title=article["title"],
            content=article["content"],
            url="",
            plot_tags=["区别对待", "公开处刑", "反杀打脸"],
            emotion_score=9,
            view_count=0
        )

        db.add(corpus)
        print(f"已添加：{article['title']}")

    db.commit()
    print("\n所有文章添加完成！")

if __name__ == "__main__":
    add_articles()
