# AI仿写生成系统 - 使用文档

## 系统简介

AI仿写生成系统是一个**结构提取与降维重组**的创作工具，核心公式为：

```
最终产出 = 70% 爆款骨架（节奏/结构） + 20% 重构血肉（新设定/新人物） + 10% 悬念钩子（情绪/期待感）
```

## 核心特点

- **不是简单的洗稿**：提取抽象结构而非替换同义词
- **情感守恒定律**：保留原文的情绪强度，但改变具体事件
- **四阶段流程**：拆解 → 配置 → 预览 → 生成

---

## 快速开始

### 1. 访问页面

启动服务器后，访问：http://127.0.0.1:8000/imitation

### 2. 阶段一：深度拆解原文

**输入方式：**
- 方式1：直接粘贴文本到文本框
- 方式2：点击"上传文件"按钮上传TXT或MD文件

**AI会分析：**
- ✅ 爆点定位：找出情绪最高涨的段落
- ✅ 核心情感主线：提炼推动剧情的底层动力
- ✅ 节奏心电图：分析起承转合的节拍点
- ✅ 结构抽象化：提取"主角遭遇羞辱 → 压抑怒火 → 初步反击"这样的逻辑链
- ✅ 悬念钩子：分析断章技巧

**点击"开始拆解"**，等待AI生成拆解报告。

---

### 3. 阶段二：配置新设定

**填写以下信息：**

| 字段 | 说明 | 示例 |
|------|------|------|
| 新世界观 | 选择故事背景 | 都市/玄幻/科幻/末世 |
| 核心冲突 | 主角面临的主要矛盾 | 裁员、退婚、背叛、夺权 |
| 主角姓名 | 新故事的主角 | 李明 |
| 身份 | 主角的社会身份 | 35岁P7技术专家 |
| 性格特点 | 主角的核心性格 | 执着、不服输 |
| 核心动机 | 驱动主角行动的力量 | 证明自己、守护家人 |
| 金手指 | 主角的外挂设定 | AI辅助系统、重生 |

**点击"确认配置"**，保存新设定。

---

### 4. 阶段三：重构蓝图预览

**点击"生成重构蓝图"**，AI将生成一个左右对照表：

| 节拍 | 原剧情节 | 新剧情节 | 转化逻辑 | 情绪 |
|------|----------|----------|----------|------|
| 1 | 萧炎测试斗气只有三段 | 李明绩效评估被评为C级 | 场景置换 | 屈辱 |
| 2 | 纳兰嫣然上门退婚 | HR王经理约谈裁员 | 场景置换 | 愤怒 |
| 3 | 萧炎立下三年之约 | 李明发誓三年创业逆袭 | 结构保留 | 热血 |

**同时显示：**
- 角色映射表：萧炎 → 李明
- 场景映射表：斗气测试 → 绩效评估

**检查对照表**，确认满意后进入下一步。

---

### 5. 阶段四：生成仿写正文

**点击"开始生成"**，AI将：
- 遵循重构蓝图的节拍点
- 模仿原文的节奏和断章技巧
- 在关键位置设置悬念钩子
- 生成3000字以上的完整章节

**等待生成完成**，查看仿写结果。

---

## 案例演示：《斗破苍穹》退婚流 → 现代职场裁员流

### 原文片段（玄幻退婚流）

> "斗之气，三段！"
>
> 望着测验魔石碑上面闪亮得甚至有些刺眼的五个大字，少年面无表情，唇角有着一抹自嘲...
>
> "萧炎，纳兰侄女此次前来，是想与你解除婚约..."
>
> 他慢慢站起身，嘴角勾起一抹冰冷的弧度："三年之后，我会亲自上云岚宗，向你挑战！"

### 新设定配置

| 原设定 | 新设定 |
|--------|--------|
| 世界观：玄幻 | 世界观：现代都市 |
| 主角：萧炎（废柴天才） | 主角：李明（被边缘化的老员工） |
| 冲突：退婚 | 冲突：裁员 |
| 金手指：药老 | 金手指：AI系统 |

### 仿写结果（现代职场流）

> "绩效评级：C"
>
> 望着邮件中刺眼的红色大字，李明面无表情地握紧了鼠标...三十五岁的他，曾经是这家互联网大厂的明星工程师。
>
> "李明，总部人力资源总监王总想和你谈谈。"
>
> "李明，根据公司战略调整，你的岗位被列入了优化名单。"
>
> 李明看着那份协议，突然笑了。他慢慢站起身，整理了一下西装领片，眼中闪过一丝冷光：
> "王总，三年之后，我会以创业公司CEO的身份回来，收购你们现在的业务！"
>
> （悬念钩子：手机突然震动，一条短信出现："【AI助手】检测到您的不甘情绪，逆袭系统已激活..."）

---

## API 接口说明

### 1. 深度拆解

```bash
POST /api/imitation/deconstruct
Content-Type: application/json

{
  "original_title": "斗破苍穹·第一章",
  "original_content": "斗之气，三段！...",
  "original_source": "https://example.com"  // 可选
}

# 返回
{
  "success": true,
  "project_id": 1,
  "analysis": {
    "emotional_peak": {...},
    "core_emotion": "...",
    "beat_sheet": [...],
    "abstract_structure": "...",
    "hook_techniques": [...]
  }
}
```

### 2. 配置新设定

```bash
POST /api/imitation/configure

{
  "project_id": 1,
  "new_worldview": "都市",
  "protagonist_setting": {
    "name": "李明",
    "identity": "35岁P7技术专家",
    "personality": "执着、不服输",
    "motivation": "证明自己"
  },
  "core_conflict": "裁员",
  "golden_finger": "AI辅助系统"
}
```

### 3. 生成重构蓝图

```bash
POST /api/imitation/preview

{
  "project_id": 1
}

# 返回
{
  "success": true,
  "blueprint": {
    "comparison_table": [...],
    "character_mapping": {...},
    "setting_mapping": {...}
  }
}
```

### 4. 生成仿写正文

```bash
POST /api/imitation/generate

{
  "project_id": 1
}

# 返回
{
  "success": true,
  "content": "第一章 被优化的时代\n\n绩效评级：C..."
}
```

---

## 技术架构

### 前端
- **页面**：`frontend/imitation.html`
- **交互逻辑**：`frontend/static/js/imitation.js`
- **特性**：四阶段向导式界面，实时状态显示

### 后端
- **API路由**：`backend/api/app.py`（第5879-6021行）
- **核心逻辑**：`backend/api/imitation_api.py`
- **Prompt模板**：`backend/prompts/imitation_prompts.py`

### 数据库
- **仿写项目表**：`imitation_projects`
- **仿写步骤表**：`imitation_steps`

---

## 核心原理

### 1. 结构抽象化

AI会忽略具体的人名、地名，只提取抽象逻辑：

```
原文：萧炎被纳兰嫣然退婚 → 立下三年之约
抽象：主角遭遇权威人物羞辱 → 立下时间限定的逆袭誓言
```

### 2. 场景置换

将抽象逻辑映射到新世界观：

```
退婚（玄幻） → 裁员（现代职场）
宗门（玄幻） → 公司总部（现代职场）
斗气等级（玄幻） → 绩效评级（现代职场）
```

### 3. 情感守恒定律

确保每个节拍点的情绪强度一致：

| 原文情绪 | 新文情绪 | 强度 |
|----------|----------|------|
| 萧炎被众人嘲讽 | 李明被同事议论 | 😠😠😠 |
| 纳兰嫣然当众退婚 | HR经理当众裁员 | 😡😡😡😡😡 |
| 萧炎立下三年之约 | 李明发誓创业逆袭 | 🔥🔥🔥🔥 |

---

## 常见问题

### Q1：仿写会不会被认为是抄袭？

A：不会。仿写系统提取的是**抽象结构**（如"遭遇羞辱 → 立下逆袭誓言"），而非具体文字。这是学习爆款文章的叙事技巧，而非复制内容。

### Q2：生成的文章需要修改吗？

A：建议微调。AI生成的仿写文章质量较高，但仍可能需要：
- 调整细节描写
- 修正人物台词
- 优化节奏感

### Q3：支持哪些世界观类型？

A：当前支持：
- 都市（职场、校园、都市异能）
- 玄幻（东方玄幻、高武）
- 科幻（赛博朋克、星际）
- 末世（丧尸、废土）
- 历史（架空历史、穿越）
- 游戏（虚拟现实、电竞）
- 灵异（悬疑、恐怖）

---

## 下一步计划

- [ ] 支持批量仿写（一次仿写多个章节）
- [ ] 添加仿写质量评分
- [ ] 支持自定义Prompt模板
- [ ] 添加仿写历史对比
- [ ] 支持导出为Word/PDF

---

**开始创作**：http://127.0.0.1:8000/imitation
